<!DOCTYPE html>
<html lang="en">
  <head>
    {% load staticfiles %}
    {% load i18n %}
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Validador">
    <meta name="author" content="{{ PROJECT_AUTHOR }}">
    <meta name="keyword" content="{{ PROJECT_NAME }}">
    <link rel="shortcut icon" href="{% static 'img/amexiproc.ico' %}">
    <title>{% block title %}{% endblock %} | NP</title>
    <link href="{% static 'css/bootstrap/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/font-awesome4/font-awesome.css' %}" rel="stylesheet">
    <link href="{% static 'css/checkbox/pretty-checkbox.min.css' %}" rel="stylesheet" type="text/css" >
    <link href="{% static 'css/base/style.css' %}" rel="stylesheet">
    <link href="{% static 'css/toast/jquery.toast.css' %}" rel="stylesheet" type="text/css" >
    <link href="{% static 'css/toogle/bootstrap-toggle.min.css' %}" rel="stylesheet" type="text/css" >
    <link href="{% static 'css/uidropdown/dropdown.css' %}" rel="stylesheet" type="text/css" >
    <style type="text/css">
      body {
        font-family: apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol" !important;
      }
      /*#news_content {
          max-height: 300px !important;
          height: 33vh;
          overflow: auto;
      }*/
    </style>
    <link rel="stylesheet" type="text/css" href="{% static 'css/wizard/wizard.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/wizard/contact-form.css' %}">
	  {% comment %} <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap/bootstrap-select.min.css' %}"> {% endcomment %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/css/bootstrap-select.min.css">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2-bootstrap-theme/0.1.0-beta.10/select2-bootstrap.css" rel="stylesheet" />
    <link href="{% static 'css/fileinput/fileinput.min.css' %}" rel="stylesheet">
	  <style type="text/css">
      /* centered columns styles */
      .row-centered {
          text-align:center;
      }
      .col-centered {
          display:inline-block;
          float:none;
          /* reset the text-align */
          text-align:left;
          /* inline-block space fix */
          margin-right:-4px;
          text-align: center;
      }
      .text-bold{
        font-weight: bold;
        color: #000;
      }
      .cb{
        color: #000;
      }
      .input-group-addon {
        padding: 6px 12px;
        font-size: 14px;
        font-weight: normal;
        line-height: 1;
        text-align: center;
        background-color: #2d2d2d;
        border-color: rgba(0, 0, 0, 0.15);
        border-radius: 4px;
        color: #FFF;
      }
          .brillo{
            box-shadow: 0 0 20px #000;
          }
          .btn-primary-dark{color:#FFF;background-color:#2d2d2d; border-color:rgba(0, 0, 0, 0.15)}
          .btn-primary-dark:hover{color:#FFF;background-color:#2d2d2d;border-color:rgba(0, 0, 0, 0.15)}
          .panel-dark{
              background-color: #2d2d2d;
          }
          .text-header{
              color: #fff;
              margin: auto;
          }
          .cg{
              background-color: green !important;
          }
          .cgi{
              color: #FFF !important;
          }
	  </style>
    <style type="text/css">
        .btn-primary-dark{color:#FFF;background-color:#2d2d2d; border-color:rgba(0, 0, 0, 0.15)}
        .btn-primary-dark:hover{color:#FFF;background-color:#2d2d2d;border-color:rgba(0, 0, 0, 0.15)}
        .form-group input[type="checkbox"] {
            display: none;
        }

        .form-group input[type="checkbox"] + .btn-group > label span {
            width: 20px;
        }

        .form-group input[type="checkbox"] + .btn-group > label span:first-child {
            display: none;
        }
        .form-group input[type="checkbox"] + .btn-group > label span:last-child {
            display: inline-block;   
        }

        .form-group input[type="checkbox"]:checked + .btn-group > label span:first-child {
            display: inline-block;
        }
        .form-group input[type="checkbox"]:checked + .btn-group > label span:last-child {
            display: none;   
        }
        .dropdown-menu>.active>a, .dropdown-menu>.active>a:focus, .dropdown-menu>.active>a:hover{
          background-color: #545454!important;
        }
        .btn-primary:hover, .btn-success:hover {
          color: #fff !important;
          background-color: #195f9c !important;
          border-color: #12538c !important;
        }
    </style>
  </head>
  <body id="top" class="show-menu">
    <div id="wrap">
        <nav class="navbar bg-hf  navbar-fixed-top">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">{% trans 'Toggle navigation' %}</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="{% url 'index' %}"><img  class="logo" src="{% static 'img/logos/gta_km_wb_r.png' %}"></a>
                  </div>
                <div class="collapse navbar-collapse" id="navbar">
                    <ul class="nav navbar-nav pull-right">
                        <li id="perfil" class="dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span class="title">&nbsp;{{ request.user.username }}</span>
                                <span class="caret"></span>
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                              <li><a class="dropdown-item" href="{% url 'logout' %}"><i class="fa fa-power-off" aria-hidden="true"></i>&nbsp;{% trans 'Sign out' %}</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <section id="container" class="">
            <section id="main-content" style="margin-top: 60px;">
              <section class="wrapper">
                <div class="row"></div>
                <div id="stadistic" >
                  {% block stadistic %}
                  {% endblock %}
                </div>
                <div id="content">
                  {% block content %}{% endblock %}
                </div>
              </section>
              <div class="text-center">
                {% get_current_language as LANGUAGE_CODE %}
                {% get_available_languages as LANGUAGES %}
                {% get_language_info_list for LANGUAGES as languages %}
                Copyright &copy; {% now "Y" %} | {{ PROJECT_NAME_COMPLETE }}<br> 
                {% for language in languages %}
                  <button class="btn btn-link {% if language.code == LANGUAGE_CODE %}text-primary{% else%}text-light{% endif %} set-language" data-code="{{language.code}}">{{ language.name_translated }}</button>
                {% endfor %}
              </div>
            </section>
        </section>
    </div>
</body>
<script src="{% static 'js/jquery/jquery-1.12.4.js' %}"></script>
<script src="{% static 'js/bootstrap/bootstrap.min.js' %}"></script>
<script src="{% static 'js/moments/moment.min.js' %}" type="text/javascript"></script>
<script src="{% static 'js/moments/moment-with-locales.min.js' %}" type="text/javascript"></script>
<script src="{% static 'js/toast/jquery.toast.js' %}"></script>
<script src="{% static 'js/toogle/bootstrap-toggle.min.js' %}"></script>
<script src="{% static 'js/font-awesome/all.js' %}"></script>
<script src="{% static 'js/uidropdown/dropdown.js' %}"></script>
<script type="text/javascript" src="{% static 'js/wizard/wizard.js' %}"></script>
<script type="text/javascript" src="{% static 'js/wizard/popper.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/validator/validator.min.js' %}"></script>
<script>
    var CSRF_TOKEN = '{{ csrf_token }}';
    var STATUS = '{{ account_status }}';
    var role = '{{ role }}';
    var WIZARD_STUFFS_URL = "{% url  'wizard_stuff' %}";
    var WIZARD_URL = "{% url 'wizard' %}";
    
</script>
<script src="{% static 'js/fileinput/fileinput.min.js' %}"></script>
{% comment %} <script type="text/javascript" src="{% static 'js/bootstrap/bootstrap-select.min.js' %}"></script> {% endcomment %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/js/bootstrap-select.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>
<script>
  $(document).ready(function(e){
    $('#tax_regime').select2({
		  width: 'resolve',
		  theme: "bootstrap"
    });
    
    $('#cp').select2({
      ajax:{
        url: WIZARD_STUFFS_URL,
        method: 'POST',
        width: 'resolve',
        dataType: 'json',
        delay: 250,
        data: function(params){
          return { 
            oper: 'get-cp',
            csrfmiddlewaretoken: getCookie('csrftoken'),
            clave: params.term
          }
        },
        processResults: function(data){
          return {
            results: $.map(data, function(item, idx){
              return {
                text: `${item.clave} - ${item.estado}`,
                id: item.clave, 
              }
            }),
          }
        },
        cache: true
        },
        language: "es",
        inputTooShort: function (left) {
          return '{% trans 'Enter X more characters.' %}';
        },
        placeholder: "{% trans 'Zip Code' %}",
        minimumInputLength: 2,
        allowClear: true,
		    width: 'resolve',
		    theme: "bootstrap"
      });

      $('#list_id_wizard').select2({
        ajax:{
          url: WIZARD_STUFFS_URL,
          method: 'POST',
          width: 'resolve',
          dataType: 'json',
          delay: 250,
          data: function(params){
            return { 
              oper: 'get-list-id',
              csrfmiddlewaretoken: getCookie('csrftoken'),
              code: params.term
            }
          },
          processResults: function(data){
            return {
              results: $.map(data, function(item, idx){
                return {
                  text: `${item.code} - ${item.name}`,
                  id: item.code, 
                }
              }),
            }
          },
          cache: true
          },
          language: "es",
          inputTooShort: function (left) {
            return 'Enter X more characters.';
          },
          placeholder: "Scheme ID",
          minimumInputLength: 2,
          allowClear: true,
              width: 'resolve',
              theme: "bootstrap"
        });

    });



</script>

{% comment %} <script type="text/javascript" src="{% static 'js/wizard/contact-form.js' %}"></script> {% endcomment %}
<script>
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie != '') {
          var cookies = document.cookie.split(';');
          for (var i = 0; i < cookies.length; i++) {
            var cookie = cookies[i].trim();
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) == (name + '=')) {
              cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
              break;
            }
          }
        }
        return cookieValue;
    }
</script>
<script type="text/javascript">
  setInterval(function(){
    $.ajax({
      url: '/app/session/verify/',
      type: 'post',
      data: {
        action: 'check_session_timeout'
      },
      dataType: 'json',
      success: function(data) {
        if (data.success) {
          if (data.message != '') {
            showWarningMessage(data.message);
          }
        } else {
          window.location = '/logout/';
        }
        
      }
    });
  }, 30000);
</script>
    <script type="text/javascript">
      var SET_LANGUAGE = '{% url 'set_language' %}';
      $('.set-language').on('click', function(event){
          event.preventDefault();
          var languageCode = $(this).data('code');
          var setLanguageForm = new FormData();
          setLanguageForm.append('language', languageCode);
          setLanguageForm.append("csrfmiddlewaretoken", $("[name=csrfmiddlewaretoken]").val());
          $.ajax({
              type: 'POST',
              url: SET_LANGUAGE,
              data: setLanguageForm,
              dataType: 'json',
              cache: false,
              contentType: false,
              processData: false
          }).done(function(response) {
             window.location.reload();
          }).fail(function(jqXHR,status, errorThrown) {
              console.log(status);
          });
          
      });
    </script>
    <script type="text/javascript">
      $('#schemeID').select2({
        ajax:{
          url: WIZARD_STUFFS_URL,
          method: 'POST',
          width: 'resolve',
          dataType: 'json',
          delay: 250,
          data: params =>{
            return { 
              oper: 'get-SchemeID',
              csrfmiddlewaretoken: getCookie('csrftoken'),
              code: params.term
            }
          },
          processResults: data => {
            return {
              results: $.map(data, (item, idx) =>{
                return {
                  text: `${item.code} - ${item.name}`,
                  id: item.code, 
                }
              }),
            }
          },
          cache: true
        },
        language: "es",
        inputTooShort: left => {
          return '{% trans 'Enter X more characters.' %}';
        },
        placeholder: "{% trans 'schemeID' %}",
        minimumInputLength: 2,
        allowClear: true,
        width: '',
        theme: "bootstrap"
      });
    </script>
</html>
